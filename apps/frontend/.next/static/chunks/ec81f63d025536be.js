(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76728,64517,e=>{"use strict";var t=e.i(97001);let a=(0,t.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>a],76728);let s=(0,t.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>s],64517)},93220,e=>{"use strict";var t=e.i(39416),a=e.i(1621),s=e.i(31881),r=e.i(76728),l=e.i(64517),n=e.i(90338),i=e.i(38709);function o(){let e=(0,s.useRouter)(),[o,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[g,b]=(0,a.useState)(!1),[h,y]=(0,a.useState)(!1),[p,f]=(0,a.useState)(""),[j,v]=(0,a.useState)("request"),[N,w]=(0,a.useState)(""),[S,P]=(0,a.useState)(""),[k,T]=(0,a.useState)(""),[C,O]=(0,a.useState)(!1),[q,A]=(0,a.useState)(""),[L,I]=(0,a.useState)("credentials"),[R,z]=(0,a.useState)(""),[D,F]=(0,a.useState)("app"),[E,_]=(0,a.useState)(""),[M,B]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{let e=i.API_ENDPOINTS.LOGIN.replace("/login",""),t=await fetch(`${e}/csrf`,{credentials:"include"});if(t.ok){let e=await t.json();B(e.csrfToken)}}catch(e){console.error("Failed to fetch CSRF token",e)}})()},[]);let G=async t=>{t.preventDefault(),x(""),b(!0);try{let t={email:o,password:c};"2fa"===L&&(t.otp=R);let a=await fetch(i.API_ENDPOINTS.LOGIN,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":M},credentials:"include",body:JSON.stringify(t)}),s=await a.json();a.ok?s.require2FA?(I("2fa"),F(s.method||"app"),s.message&&_(s.message)):e.push("/admin/dashboard"):x(s.message||"Invalid credentials")}catch(e){x("Connection error. Please ensure the backend server is running.")}finally{b(!1)}},J=async e=>{e.preventDefault(),A(""),O(!0);try{let e=await fetch(i.API_ENDPOINTS.FORGOT_PASSWORD,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p})}),t=await e.json();e.ok?(A(t.message||"OTP has been sent to your email."),v("verify")):A(t.message||"Failed to send OTP. Please try again.")}catch(e){A("Connection error. Please try again later.")}finally{O(!1)}},U=async e=>{if(e.preventDefault(),A(""),S!==k)return void A("Passwords do not match.");if(S.length<6)return void A("Password must be at least 6 characters long.");O(!0);try{let e=await fetch(i.API_ENDPOINTS.RESET_PASSWORD,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p,otp:N,newPassword:S})}),t=await e.json();e.ok?(A("Password reset successfully! You can now login."),setTimeout(()=>{y(!1),v("request"),f(""),w(""),P(""),T(""),A("")},2e3)):A(t.message||"Failed to reset password. Please try again.")}catch(e){A("Connection error. Please try again later.")}finally{O(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-500 via-teal-600 to-cyan-700 px-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-block p-3 bg-teal-100 rounded-full mb-4",children:(0,t.jsx)(r.Lock,{className:"w-8 h-8 text-teal-600"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"UTS Marine LLP"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Admin Panel"})]}),m&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:m}),(0,t.jsxs)("form",{onSubmit:G,className:"space-y-6",children:["credentials"===L?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(l.Mail,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,t.jsx)("input",{type:"email",value:o,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition",placeholder:"admin@example.com",required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(r.Lock,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,t.jsx)("input",{type:"password",value:c,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition",placeholder:"••••••••",required:!0})]})]})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-4 bg-blue-50 text-blue-800 p-3 rounded-lg text-sm",children:"email"===D?E||"Please enter the verification code sent to your email.":"Please enter the code from your authenticator app."}),(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Two-Factor Authentication Code"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(r.Lock,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,t.jsx)("input",{type:"text",value:R,onChange:e=>z(e.target.value.replace(/\D/g,"").slice(0,6)),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition text-xl tracking-widest",placeholder:"000000",maxLength:6,autoFocus:!0,required:!0})]})]}),(0,t.jsx)("button",{type:"submit",disabled:g,className:"w-full bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:g?"2fa"===L?"Verifying...":"Signing in...":"2fa"===L?"Verify":"Sign In"})]}),(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)("button",{type:"button",onClick:()=>y(!0),className:"text-sm text-teal-600 hover:text-teal-700 hover:underline",children:"Forgot Password?"})}),(0,t.jsx)("p",{className:"mt-6 text-center text-sm text-gray-600",children:"Protected area - Authorized access only"})]}),h&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative",children:[(0,t.jsx)("button",{onClick:()=>{y(!1),v("request"),f(""),w(""),P(""),T(""),A("")},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:(0,t.jsx)(n.X,{size:24})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Reset Password"}),"request"===j?(0,t.jsxs)("form",{onSubmit:J,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(l.Mail,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,t.jsx)("input",{type:"email",value:p,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition",placeholder:"admin@example.com",required:!0})]})]}),q&&(0,t.jsx)("div",{className:`p-4 rounded-lg ${q.includes("successfully")?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:q}),(0,t.jsx)("button",{type:"submit",disabled:C,className:"w-full bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:C?"Sending OTP...":"Send OTP"})]}):(0,t.jsxs)("form",{onSubmit:U,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"OTP Code"}),(0,t.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value.replace(/\D/g,"").slice(0,6)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition text-center text-2xl tracking-widest",placeholder:"000000",maxLength:6,required:!0}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Enter the 6-digit code sent to your email"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(r.Lock,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,t.jsx)("input",{type:"password",value:S,onChange:e=>P(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition",placeholder:"••••••••",required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(r.Lock,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,t.jsx)("input",{type:"password",value:k,onChange:e=>T(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition",placeholder:"••••••••",required:!0})]})]}),q&&(0,t.jsx)("div",{className:`p-4 rounded-lg ${q.includes("successfully")?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:q}),(0,t.jsx)("button",{type:"submit",disabled:C,className:"w-full bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:C?"Resetting Password...":"Reset Password"}),(0,t.jsx)("button",{type:"button",onClick:()=>{v("request"),w(""),P(""),T(""),A("")},className:"w-full text-teal-600 hover:text-teal-700 text-sm font-medium",children:"Back to email input"})]})]})})]})}e.s(["default",()=>o])}]);