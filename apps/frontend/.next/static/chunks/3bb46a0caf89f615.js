(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82206,e=>{"use strict";let a=(0,e.i(97001).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>a],82206)},67789,e=>{"use strict";var a=e.i(39416),t=e.i(97001);let s=(0,t.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),r=(0,t.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),l=(0,t.default)("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),i=(0,t.default)("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);function d({currentPage:e,totalPages:t,onPageChange:d}){let n=t>1,o=(()=>{let a=[];if(t<=5)for(let e=1;e<=t;e++)a.push(e);else if(e<=3){for(let e=1;e<=4;e++)a.push(e);a.push(-1),a.push(t)}else if(e>=t-2){a.push(1),a.push(-1);for(let e=t-3;e<=t;e++)a.push(e)}else a.push(1),a.push(-1),a.push(e-1),a.push(e),a.push(e+1),a.push(-1),a.push(t);return a})();return(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-6 py-4 border-t border-gray-200",children:[n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>d(1),disabled:1===e,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"First page",children:(0,a.jsx)(l,{size:18})}),(0,a.jsx)("button",{onClick:()=>d(e-1),disabled:1===e,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page",children:(0,a.jsx)(s,{size:18})}),o.map((t,s)=>-1===t?(0,a.jsx)("span",{className:"px-3 py-2 text-gray-400",children:"..."},`ellipsis-${s}`):(0,a.jsx)("button",{onClick:()=>d(t),className:`px-4 py-2 rounded-lg border transition-colors ${e===t?"bg-teal-600 text-white border-teal-600":"border-gray-300 hover:bg-gray-50"}`,children:t},t)),(0,a.jsx)("button",{onClick:()=>d(e+1),disabled:e===t,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page",children:(0,a.jsx)(r,{size:18})}),(0,a.jsx)("button",{onClick:()=>d(t),disabled:e===t,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Last page",children:(0,a.jsx)(i,{size:18})})]}),(0,a.jsx)("span",{className:`${n?"ml-4":""} text-sm text-gray-600 font-medium`,children:n?`Page ${e} of ${t}`:"Showing all items (Page 1)"})]})}e.s(["default",()=>d],67789)},40103,e=>{"use strict";let a=(0,e.i(97001).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],40103)},87841,e=>{"use strict";let a=(0,e.i(97001).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],87841)},30913,e=>{"use strict";let a=(0,e.i(97001).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],30913)},29027,e=>{"use strict";var a=e.i(39416),t=e.i(1621),s=e.i(97001);let r=(0,s.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var l=e.i(82206),i=e.i(40103),d=e.i(90338),n=e.i(91691);let o=(0,s.default)("file-image",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);var c=e.i(87841),h=e.i(30913);let g=(0,s.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var m=e.i(38709),p=e.i(67789);function x(){let[e,s]=(0,t.useState)([]),[x,u]=(0,t.useState)(!0),[y,b]=(0,t.useState)(!1),[f,j]=(0,t.useState)(""),[v,N]=(0,t.useState)(null),[w,k]=(0,t.useState)(!1),[M,E]=(0,t.useState)(!1),[S,P]=(0,t.useState)({alt_text:"",caption:""}),[C,z]=(0,t.useState)(!1),_=(0,t.useRef)(null),[D,T]=(0,t.useState)(1),[I,A]=(0,t.useState)(1);(0,t.useEffect)(()=>{T(1)},[f]),(0,t.useEffect)(()=>{U()},[f,D]);let U=async()=>{try{let e=new URLSearchParams;e.append("page",D.toString()),e.append("limit","20"),f&&e.append("search",f);let a=await fetch(`${m.API_ENDPOINTS.MEDIA}?${e.toString()}`,{credentials:"include"});if(a.ok){let e=await a.json();s(e.data),e.meta&&A(e.meta.pages||1)}}catch(e){console.error("Error fetching media:",e)}finally{u(!1)}},O=async e=>{if(!e||0===e.length)return;let a=e[0];await $(a)},$=async e=>{b(!0);try{let a=new FormData;a.append("file",e);let t=await fetch(m.API_ENDPOINTS.MEDIA_UPLOAD,{method:"POST",credentials:"include",body:a});if(t.ok)await U();else{let e=await t.json();alert(`Upload failed: ${e.error?.message||"Unknown error"}`)}}catch(e){console.error("Error uploading file:",e),alert("Upload failed")}finally{b(!1)}},B=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?z(!0):"dragleave"===e.type&&z(!1)},L=async a=>{if(confirm("Are you sure you want to delete this image?"))try{(await fetch(m.API_ENDPOINTS.MEDIA_ITEM(a),{method:"DELETE",credentials:"include"})).ok&&(s(e.filter(e=>e.id!==a)),k(!1))}catch(e){console.error("Error deleting media:",e)}},F=async()=>{if(v)try{(await fetch(m.API_ENDPOINTS.MEDIA_ITEM(v.id),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).ok&&(await U(),E(!1),k(!1))}catch(e){console.error("Error updating media:",e)}},q=e=>{N(e),P({alt_text:e.alt_text||"",caption:e.caption||""}),E(!0)},R=e=>{if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+["Bytes","KB","MB","GB"][a]};return x?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading media..."})]})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Media Library"}),(0,a.jsxs)("button",{onClick:()=>_.current?.click(),disabled:y,className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 flex items-center gap-2",children:[(0,a.jsx)(r,{size:18}),y?"Uploading...":"Upload Image"]})]}),(0,a.jsxs)("div",{className:`mb-6 border-2 border-dashed rounded-lg p-8 text-center transition-colors ${C?"border-teal-500 bg-teal-50":"border-gray-300 bg-gray-50"}`,onDragEnter:B,onDragLeave:B,onDragOver:B,onDrop:e=>{e.preventDefault(),e.stopPropagation(),z(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&$(e.dataTransfer.files[0])},children:[(0,a.jsx)("input",{ref:_,type:"file",accept:"image/*",onChange:e=>O(e.target.files),className:"hidden"}),(0,a.jsx)(o,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"Drag and drop images here, or click to select"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Supports JPG, PNG, GIF, WebP. Max 10MB. Auto-optimizes on upload."})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,a.jsx)("input",{type:"text",placeholder:"Search images...",value:f,onChange:e=>j(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]})}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[(0,a.jsx)(n.Image,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-500",children:f?"No images found":"No images uploaded yet"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:e.map(e=>(0,a.jsxs)("div",{className:"group relative bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"aspect-square relative bg-gray-100",children:[(0,a.jsx)("img",{src:`http://localhost:5001${encodeURI(e.urls.thumbnail)}`,alt:e.alt_text||e.original_filename,className:"w-full h-full object-cover"}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100",children:[(0,a.jsx)("button",{onClick:()=>{N(e),k(!0)},className:"p-2 bg-white text-gray-700 rounded-lg hover:bg-gray-100",title:"Preview",children:(0,a.jsx)(h.Eye,{size:18})}),(0,a.jsx)("button",{onClick:()=>q(e),className:"p-2 bg-white text-gray-700 rounded-lg hover:bg-gray-100",title:"Edit",children:(0,a.jsx)(c.Edit,{size:18})}),(0,a.jsx)("button",{onClick:()=>L(e.id),className:"p-2 bg-red-600 text-white rounded-lg hover:bg-red-700",title:"Delete",children:(0,a.jsx)(i.Trash2,{size:18})})]})]}),(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 truncate",title:e.original_filename,children:e.original_filename}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:R(e.file_size)})]})]},e.id))}),(0,a.jsx)(p.default,{currentPage:D,totalPages:I,onPageChange:T})]}),w&&v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Image Preview"}),(0,a.jsx)("button",{onClick:()=>k(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(d.X,{size:20})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("img",{src:(0,m.getUploadUrl)(v.urls.optimized),alt:v.alt_text||v.original_filename,className:"w-full rounded-lg mb-4"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Original Filename:"}),(0,a.jsx)("p",{className:"font-medium",children:v.original_filename})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"File Size:"}),(0,a.jsx)("p",{className:"font-medium",children:R(v.file_size)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Dimensions:"}),(0,a.jsxs)("p",{className:"font-medium",children:[v.width," Ã— ",v.height]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Mime Type:"}),(0,a.jsx)("p",{className:"font-medium",children:v.mime_type})]}),v.alt_text&&(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Alt Text:"}),(0,a.jsx)("p",{className:"font-medium",children:v.alt_text})]}),v.caption&&(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Caption:"}),(0,a.jsx)("p",{className:"font-medium",children:v.caption})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,a.jsxs)("a",{href:(0,m.getUploadUrl)(v.urls.original),download:!0,className:"flex items-center gap-2 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700",children:[(0,a.jsx)(g,{size:18}),"Download Original"]}),(0,a.jsxs)("button",{onClick:()=>q(v),className:"flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:[(0,a.jsx)(c.Edit,{size:18}),"Edit Metadata"]})]})]})]})}),M&&v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Edit Image Metadata"}),(0,a.jsx)("button",{onClick:()=>E(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(d.X,{size:20})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alt Text"}),(0,a.jsx)("input",{type:"text",value:S.alt_text,onChange:e=>P({...S,alt_text:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",placeholder:"Descriptive alt text for accessibility"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caption"}),(0,a.jsx)("textarea",{value:S.caption,onChange:e=>P({...S,caption:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500",rows:3,placeholder:"Optional caption"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:F,className:"flex-1 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700",children:"Save Changes"}),(0,a.jsx)("button",{onClick:()=>E(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]})})]})}e.s(["default",()=>x],29027)}]);