{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Applications/XAMPP/xamppfiles/htdocs/marinellpnew/apps/frontend/src/config/api.ts"],"sourcesContent":["/**\n * API Configuration\n * Uses environment variables with fallback to defaults\n */\n\nconst getBackendUrl = (): string => {\n  // In Next.js, environment variables prefixed with NEXT_PUBLIC_ are available on the client\n  if (typeof window !== 'undefined') {\n    // Client-side: use environment variable or default\n    return process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5001';\n  }\n  // Server-side: use environment variable or default\n  return process.env.API_URL || process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5001';\n};\n\nexport const API_BASE_URL = getBackendUrl();\n\nexport const API_ENDPOINTS = {\n  // Auth\n  LOGIN: `${API_BASE_URL}/api/auth/login`,\n  LOGOUT: `${API_BASE_URL}/api/auth/logout`,\n  FORGOT_PASSWORD: `${API_BASE_URL}/api/auth/forgot-password`,\n  RESET_PASSWORD: `${API_BASE_URL}/api/auth/reset-password`,\n  CHANGE_PASSWORD: `${API_BASE_URL}/api/auth/change-password`,\n  CHANGE_EMAIL: `${API_BASE_URL}/api/auth/change-email`,\n  GET_CURRENT_USER: `${API_BASE_URL}/api/auth/me`,\n  ENABLE_2FA: `${API_BASE_URL}/api/auth/2fa/enable`,\n  VERIFY_2FA_SETUP: `${API_BASE_URL}/api/auth/2fa/verify-setup`,\n  DISABLE_2FA: `${API_BASE_URL}/api/auth/2fa/disable`,\n  GET_2FA_STATUS: `${API_BASE_URL}/api/auth/2fa/status`,\n\n  // Admin Dashboard\n  DASHBOARD_STATS: `${API_BASE_URL}/api/admin/dashboard/stats`,\n\n  // Products (New Arrivals)\n  PRODUCTS: `${API_BASE_URL}/api/admin/new-arrivals`,\n  PRODUCT: (id: number | string) => `${API_BASE_URL}/api/admin/new-arrivals/${id}`,\n\n  // Blogs\n  BLOGS: `${API_BASE_URL}/api/admin/blogs`,\n  BLOG: (id: number | string) => `${API_BASE_URL}/api/admin/blogs/${id}`,\n\n  // Media\n  MEDIA: `${API_BASE_URL}/api/admin/media`,\n  MEDIA_UPLOAD: `${API_BASE_URL}/api/admin/media/upload`,\n  MEDIA_ITEM: (id: number | string) => `${API_BASE_URL}/api/admin/media/${id}`,\n\n  // Public\n  PUBLIC_PRODUCTS: `${API_BASE_URL}/api/new-arrivals`,\n  PUBLIC_PRODUCT_BY_SLUG: (slug: string) => `${API_BASE_URL}/api/new-arrivals/${slug}`,\n  PUBLIC_BLOGS: `${API_BASE_URL}/api/blogs`,\n  PUBLIC_BLOG_BY_SLUG: (slug: string) => `${API_BASE_URL}/api/blogs/${slug}`,\n\n  // Contact\n  CONTACT: `${API_BASE_URL}/api/contact`,\n};\n\n// Helper function to get upload URLs\nexport const getUploadUrl = (path: string): string => {\n  if (!path) return '';\n  // If path already starts with http, return as is (decode first to avoid double encoding)\n  if (path.startsWith('http://') || path.startsWith('https://')) {\n    try {\n      const url = new URL(path);\n      // Decode and re-encode to normalize, but don't double encode\n      const decodedPath = decodeURIComponent(url.pathname);\n      url.pathname = decodedPath.split('/').map(segment => encodeURIComponent(segment)).join('/');\n      return url.toString();\n    } catch {\n      return path;\n    }\n  }\n  // Otherwise, prepend backend URL and encode the path segments\n  const cleanPath = path.startsWith('/') ? path : `/${path}`;\n  // Decode first to avoid double encoding, then encode each segment\n  const decodedPath = decodeURIComponent(cleanPath);\n  const encodedPath = decodedPath.split('/').map(segment => {\n    // Don't encode empty segments (double slashes)\n    if (!segment) return '';\n    return encodeURIComponent(segment);\n  }).join('/');\n  return `${API_BASE_URL}${encodedPath}`;\n};\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;AAED,MAAM,gBAAgB;IACpB,2FAA2F;IAC3F;;IAIA,mDAAmD;IACnD,OAAO,QAAQ,GAAG,CAAC,OAAO,IAAI,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AACnE;AAEO,MAAM,eAAe;AAErB,MAAM,gBAAgB;IAC3B,OAAO;IACP,OAAO,GAAG,aAAa,eAAe,CAAC;IACvC,QAAQ,GAAG,aAAa,gBAAgB,CAAC;IACzC,iBAAiB,GAAG,aAAa,yBAAyB,CAAC;IAC3D,gBAAgB,GAAG,aAAa,wBAAwB,CAAC;IACzD,iBAAiB,GAAG,aAAa,yBAAyB,CAAC;IAC3D,cAAc,GAAG,aAAa,sBAAsB,CAAC;IACrD,kBAAkB,GAAG,aAAa,YAAY,CAAC;IAC/C,YAAY,GAAG,aAAa,oBAAoB,CAAC;IACjD,kBAAkB,GAAG,aAAa,0BAA0B,CAAC;IAC7D,aAAa,GAAG,aAAa,qBAAqB,CAAC;IACnD,gBAAgB,GAAG,aAAa,oBAAoB,CAAC;IAErD,kBAAkB;IAClB,iBAAiB,GAAG,aAAa,0BAA0B,CAAC;IAE5D,0BAA0B;IAC1B,UAAU,GAAG,aAAa,uBAAuB,CAAC;IAClD,SAAS,CAAC,KAAwB,GAAG,aAAa,wBAAwB,EAAE,IAAI;IAEhF,QAAQ;IACR,OAAO,GAAG,aAAa,gBAAgB,CAAC;IACxC,MAAM,CAAC,KAAwB,GAAG,aAAa,iBAAiB,EAAE,IAAI;IAEtE,QAAQ;IACR,OAAO,GAAG,aAAa,gBAAgB,CAAC;IACxC,cAAc,GAAG,aAAa,uBAAuB,CAAC;IACtD,YAAY,CAAC,KAAwB,GAAG,aAAa,iBAAiB,EAAE,IAAI;IAE5E,SAAS;IACT,iBAAiB,GAAG,aAAa,iBAAiB,CAAC;IACnD,wBAAwB,CAAC,OAAiB,GAAG,aAAa,kBAAkB,EAAE,MAAM;IACpF,cAAc,GAAG,aAAa,UAAU,CAAC;IACzC,qBAAqB,CAAC,OAAiB,GAAG,aAAa,WAAW,EAAE,MAAM;IAE1E,UAAU;IACV,SAAS,GAAG,aAAa,YAAY,CAAC;AACxC;AAGO,MAAM,eAAe,CAAC;IAC3B,IAAI,CAAC,MAAM,OAAO;IAClB,yFAAyF;IACzF,IAAI,KAAK,UAAU,CAAC,cAAc,KAAK,UAAU,CAAC,aAAa;QAC7D,IAAI;YACF,MAAM,MAAM,IAAI,IAAI;YACpB,6DAA6D;YAC7D,MAAM,cAAc,mBAAmB,IAAI,QAAQ;YACnD,IAAI,QAAQ,GAAG,YAAY,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,UAAW,mBAAmB,UAAU,IAAI,CAAC;YACvF,OAAO,IAAI,QAAQ;QACrB,EAAE,OAAM;YACN,OAAO;QACT;IACF;IACA,8DAA8D;IAC9D,MAAM,YAAY,KAAK,UAAU,CAAC,OAAO,OAAO,CAAC,CAAC,EAAE,MAAM;IAC1D,kEAAkE;IAClE,MAAM,cAAc,mBAAmB;IACvC,MAAM,cAAc,YAAY,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA;QAC7C,+CAA+C;QAC/C,IAAI,CAAC,SAAS,OAAO;QACrB,OAAO,mBAAmB;IAC5B,GAAG,IAAI,CAAC;IACR,OAAO,GAAG,eAAe,aAAa;AACxC"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///Applications/XAMPP/xamppfiles/htdocs/marinellpnew/apps/frontend/src/app/admin/layout.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter, usePathname } from 'next/navigation';\nimport Link from 'next/link';\nimport {\n  LayoutDashboard,\n  Package,\n  FileText,\n  Image,\n  LogOut,\n  Menu,\n  X,\n  Settings,\n} from 'lucide-react';\nimport { API_ENDPOINTS } from '@/config/api';\n\ninterface AdminLayoutProps {\n  children: React.ReactNode;\n}\n\nexport default function AdminLayout({ children }: AdminLayoutProps) {\n  const router = useRouter();\n  const pathname = usePathname();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      if (pathname === '/admin/login') {\n        setIsLoading(false);\n        return;\n      }\n\n      try {\n        const response = await fetch(API_ENDPOINTS.GET_CURRENT_USER, {\n          credentials: 'include',\n        });\n\n        if (response.ok) {\n          setIsAuthenticated(true);\n        } else {\n          router.push('/admin/login');\n        }\n      } catch (error) {\n        console.error('Auth check error:', error);\n        router.push('/admin/login');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    checkAuth();\n  }, [pathname, router]);\n\n  const handleLogout = async () => {\n    try {\n      await fetch(API_ENDPOINTS.LOGOUT, {\n        method: 'POST',\n        credentials: 'include',\n      });\n    } catch (error) {\n      console.error('Logout error:', error);\n    }\n    router.push('/admin/login');\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (pathname === '/admin/login') {\n    return <>{children}</>;\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  const menuItems = [\n    { icon: LayoutDashboard, label: 'Dashboard', href: '/admin/dashboard' },\n    { icon: Package, label: 'New Arrivals', href: '/admin/products' },\n    { icon: FileText, label: 'Blogs', href: '/admin/blogs' },\n    { icon: Image, label: 'Media', href: '/admin/media' },\n    { icon: Settings, label: 'Settings', href: '/admin/settings' },\n  ];\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\">\n      {/* Sidebar */}\n      <aside\n        className={`${isSidebarOpen ? 'w-64' : 'w-20'\n          } bg-gray-900 text-white transition-all duration-300 flex flex-col`}\n      >\n        <div className=\"p-4 flex items-center justify-between\">\n          {isSidebarOpen && (\n            <div>\n              <h1 className=\"text-xl font-bold text-teal-400\">UTS Marine</h1>\n              <p className=\"text-xs text-gray-400\">Admin Panel</p>\n            </div>\n          )}\n          <button\n            onClick={() => setIsSidebarOpen(!isSidebarOpen)}\n            className=\"p-2 hover:bg-gray-800 rounded-lg\"\n          >\n            {isSidebarOpen ? <X size={20} /> : <Menu size={20} />}\n          </button>\n        </div>\n\n        <nav className=\"flex-1 px-2 py-4 space-y-2\">\n          {menuItems.map((item) => {\n            const Icon = item.icon;\n            const isActive = pathname === item.href;\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                className={`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${isActive\n                  ? 'bg-teal-600 text-white'\n                  : 'text-gray-300 hover:bg-gray-800 hover:text-white'\n                  }`}\n              >\n                <Icon size={20} />\n                {isSidebarOpen && <span>{item.label}</span>}\n              </Link>\n            );\n          })}\n        </nav>\n\n        <div className=\"p-4 border-t border-gray-800\">\n          <button\n            onClick={handleLogout}\n            className=\"flex items-center gap-3 px-3 py-2 w-full text-gray-300 hover:bg-gray-800 hover:text-white rounded-lg transition-colors\"\n          >\n            <LogOut size={20} />\n            {isSidebarOpen && <span>Logout</span>}\n          </button>\n        </div>\n      </aside>\n\n      {/* Main Content */}\n      <main className=\"flex-1 overflow-y-auto\">\n        <div className=\"p-8\">{children}</div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAfA;;;;;;;AAqBe,SAAS,YAAY,EAAE,QAAQ,EAAoB;IAChE,MAAM,SAAS,IAAA,mLAAS;IACxB,MAAM,WAAW,IAAA,qLAAW;IAC5B,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,qPAAQ,EAAC;IACvD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,qPAAQ,EAAC;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qPAAQ,EAAC;IAE3C,IAAA,sPAAS,EAAC;QACR,MAAM,YAAY;YAChB,IAAI,aAAa,gBAAgB;gBAC/B,aAAa;gBACb;YACF;YAEA,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,yKAAa,CAAC,gBAAgB,EAAE;oBAC3D,aAAa;gBACf;gBAEA,IAAI,SAAS,EAAE,EAAE;oBACf,mBAAmB;gBACrB,OAAO;oBACL,OAAO,IAAI,CAAC;gBACd;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,qBAAqB;gBACnC,OAAO,IAAI,CAAC;YACd,SAAU;gBACR,aAAa;YACf;QACF;QAEA;IACF,GAAG;QAAC;QAAU;KAAO;IAErB,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,MAAM,yKAAa,CAAC,MAAM,EAAE;gBAChC,QAAQ;gBACR,aAAa;YACf;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;QACjC;QACA,OAAO,IAAI,CAAC;IACd;IAEA,IAAI,WAAW;QACb,qBACE,kRAAC;YAAI,WAAU;sBACb,cAAA,kRAAC;gBAAI,WAAU;;kCACb,kRAAC;wBAAI,WAAU;;;;;;kCACf,kRAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;IAI1C;IAEA,IAAI,aAAa,gBAAgB;QAC/B,qBAAO;sBAAG;;IACZ;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO;IACT;IAEA,MAAM,YAAY;QAChB;YAAE,MAAM,+PAAe;YAAE,OAAO;YAAa,MAAM;QAAmB;QACtE;YAAE,MAAM,mOAAO;YAAE,OAAO;YAAgB,MAAM;QAAkB;QAChE;YAAE,MAAM,0OAAQ;YAAE,OAAO;YAAS,MAAM;QAAe;QACvD;YAAE,MAAM,6NAAK;YAAE,OAAO;YAAS,MAAM;QAAe;QACpD;YAAE,MAAM,sOAAQ;YAAE,OAAO;YAAY,MAAM;QAAkB;KAC9D;IAED,qBACE,kRAAC;QAAI,WAAU;;0BAEb,kRAAC;gBACC,WAAW,GAAG,gBAAgB,SAAS,OACpC,iEAAiE,CAAC;;kCAErE,kRAAC;wBAAI,WAAU;;4BACZ,+BACC,kRAAC;;kDACC,kRAAC;wCAAG,WAAU;kDAAkC;;;;;;kDAChD,kRAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;0CAGzC,kRAAC;gCACC,SAAS,IAAM,iBAAiB,CAAC;gCACjC,WAAU;0CAET,8BAAgB,kRAAC,iNAAC;oCAAC,MAAM;;;;;yDAAS,kRAAC,0NAAI;oCAAC,MAAM;;;;;;;;;;;;;;;;;kCAInD,kRAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAC;4BACd,MAAM,OAAO,KAAK,IAAI;4BACtB,MAAM,WAAW,aAAa,KAAK,IAAI;4BACvC,qBACE,kRAAC,2MAAI;gCAEH,MAAM,KAAK,IAAI;gCACf,WAAW,CAAC,+DAA+D,EAAE,WACzE,2BACA,oDACA;;kDAEJ,kRAAC;wCAAK,MAAM;;;;;;oCACX,+BAAiB,kRAAC;kDAAM,KAAK,KAAK;;;;;;;+BAR9B,KAAK,IAAI;;;;;wBAWpB;;;;;;kCAGF,kRAAC;wBAAI,WAAU;kCACb,cAAA,kRAAC;4BACC,SAAS;4BACT,WAAU;;8CAEV,kRAAC,oOAAM;oCAAC,MAAM;;;;;;gCACb,+BAAiB,kRAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;0BAM9B,kRAAC;gBAAK,WAAU;0BACd,cAAA,kRAAC;oBAAI,WAAU;8BAAO;;;;;;;;;;;;;;;;;AAI9B"}}]
}