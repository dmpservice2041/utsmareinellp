module.exports=[78931,96862,a=>{"use strict";var b=a.i(46396);let c=(0,b.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>c],78931);let d=(0,b.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);a.s(["Mail",()=>d],96862)},59934,a=>{"use strict";var b=a.i(33422),c=a.i(1635),d=a.i(12961),e=a.i(78931),f=a.i(96862),g=a.i(80162),h=a.i(55835);function i(){let a=(0,d.useRouter)(),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)("request"),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)("credentials"),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)("app"),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{let a=h.API_ENDPOINTS.LOGIN.replace("/login",""),b=await fetch(`${a}/csrf`,{credentials:"include"});if(b.ok){let a=await b.json();P(a.csrfToken)}}catch(a){console.error("Failed to fetch CSRF token",a)}})()},[]);let Q=async b=>{b.preventDefault(),n(""),p(!0);try{let b={email:i,password:k};"2fa"===G&&(b.otp=I);let c=await fetch(h.API_ENDPOINTS.LOGIN,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":O},credentials:"include",body:JSON.stringify(b)}),d=await c.json();c.ok?d.require2FA?(H("2fa"),L(d.method||"app"),d.message&&N(d.message)):a.push("/admin/dashboard"):n(d.message||"Invalid credentials")}catch(a){n("Connection error. Please ensure the backend server is running.")}finally{p(!1)}},R=async a=>{a.preventDefault(),F(""),D(!0);try{let a=await fetch(h.API_ENDPOINTS.FORGOT_PASSWORD,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})}),b=await a.json();a.ok?(F(b.message||"OTP has been sent to your email."),v("verify")):F(b.message||"Failed to send OTP. Please try again.")}catch(a){F("Connection error. Please try again later.")}finally{D(!1)}},S=async a=>{if(a.preventDefault(),F(""),y!==A)return void F("Passwords do not match.");if(y.length<6)return void F("Password must be at least 6 characters long.");D(!0);try{let a=await fetch(h.API_ENDPOINTS.RESET_PASSWORD,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,otp:w,newPassword:y})}),b=await a.json();a.ok?(F("Password reset successfully! You can now login."),setTimeout(()=>{r(!1),v("request"),t(""),x(""),z(""),B(""),F("")},2e3)):F(b.message||"Failed to reset password. Please try again.")}catch(a){F("Connection error. Please try again later.")}finally{D(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-500 via-teal-600 to-cyan-700 px-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("div",{className:"inline-block p-3 bg-teal-100 rounded-full mb-4",children:(0,b.jsx)(e.Lock,{className:"w-8 h-8 text-teal-600"})}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"UTS Marine LLP"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Admin Panel"})]}),m&&(0,b.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:m}),(0,b.jsxs)("form",{onSubmit:Q,className:"space-y-6",children:["credentials"===G?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.Mail,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,b.jsx)("input",{type:"email",value:i,onChange:a=>j(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition",placeholder:"admin@example.com",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(e.Lock,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,b.jsx)("input",{type:"password",value:k,onChange:a=>l(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition",placeholder:"••••••••",required:!0})]})]})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-4 bg-blue-50 text-blue-800 p-3 rounded-lg text-sm",children:"email"===K?M||"Please enter the verification code sent to your email.":"Please enter the code from your authenticator app."}),(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Two-Factor Authentication Code"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(e.Lock,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,b.jsx)("input",{type:"text",value:I,onChange:a=>J(a.target.value.replace(/\D/g,"").slice(0,6)),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition text-xl tracking-widest",placeholder:"000000",maxLength:6,autoFocus:!0,required:!0})]})]}),(0,b.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:o?"2fa"===G?"Verifying...":"Signing in...":"2fa"===G?"Verify":"Sign In"})]}),(0,b.jsx)("div",{className:"mt-4 text-center",children:(0,b.jsx)("button",{type:"button",onClick:()=>r(!0),className:"text-sm text-teal-600 hover:text-teal-700 hover:underline",children:"Forgot Password?"})}),(0,b.jsx)("p",{className:"mt-6 text-center text-sm text-gray-600",children:"Protected area - Authorized access only"})]}),q&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative",children:[(0,b.jsx)("button",{onClick:()=>{r(!1),v("request"),t(""),x(""),z(""),B(""),F("")},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:(0,b.jsx)(g.X,{size:24})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Reset Password"}),"request"===u?(0,b.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.Mail,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,b.jsx)("input",{type:"email",value:s,onChange:a=>t(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition",placeholder:"admin@example.com",required:!0})]})]}),E&&(0,b.jsx)("div",{className:`p-4 rounded-lg ${E.includes("successfully")?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:E}),(0,b.jsx)("button",{type:"submit",disabled:C,className:"w-full bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:C?"Sending OTP...":"Send OTP"})]}):(0,b.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"OTP Code"}),(0,b.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value.replace(/\D/g,"").slice(0,6)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition text-center text-2xl tracking-widest",placeholder:"000000",maxLength:6,required:!0}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Enter the 6-digit code sent to your email"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(e.Lock,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,b.jsx)("input",{type:"password",value:y,onChange:a=>z(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition",placeholder:"••••••••",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(e.Lock,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,b.jsx)("input",{type:"password",value:A,onChange:a=>B(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition",placeholder:"••••••••",required:!0})]})]}),E&&(0,b.jsx)("div",{className:`p-4 rounded-lg ${E.includes("successfully")?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:E}),(0,b.jsx)("button",{type:"submit",disabled:C,className:"w-full bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:C?"Resetting Password...":"Reset Password"}),(0,b.jsx)("button",{type:"button",onClick:()=>{v("request"),x(""),z(""),B(""),F("")},className:"w-full text-teal-600 hover:text-teal-700 text-sm font-medium",children:"Back to email input"})]})]})})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=marinellpnew_6ccc3c75._.js.map