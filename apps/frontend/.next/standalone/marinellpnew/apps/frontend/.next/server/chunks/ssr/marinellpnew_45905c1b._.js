module.exports=[48552,a=>{"use strict";let b=(0,a.i(46396).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],48552)},20421,a=>{"use strict";let b=(0,a.i(46396).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],20421)},38804,a=>{"use strict";let b=(0,a.i(46396).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],38804)},7755,66842,a=>{"use strict";let b=(0,a.i(46396).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],7755);var c=a.i(33422),d=a.i(1635),e=a.i(80162),f=a.i(21512),g=a.i(38804),h=a.i(48552),i=a.i(55835);function j({isOpen:a,onClose:b,onSelect:j,multiple:k=!1,selectedIds:l=[]}){let[m,n]=(0,d.useState)([]),[o,p]=(0,d.useState)(!1),[q,r]=(0,d.useState)(""),[s,t]=(0,d.useState)([]),u=(0,d.useRef)(null),v=(0,d.useRef)(""),w=(0,d.useCallback)(async(a="")=>{u.current&&u.current.abort(),u.current=new AbortController;let b=u.current.signal;p(!0);try{let c=new URL(i.API_ENDPOINTS.MEDIA);a&&c.searchParams.append("search",a);let d=await fetch(c.toString(),{credentials:"include",signal:b});if(d.ok&&!b.aborted){let a=await d.json();n(a.data||[])}}catch(a){"AbortError"!==a.name&&(console.error("Error fetching media:",a),n([]))}finally{b.aborted||p(!1)}},[]);return((0,d.useEffect)(()=>{if(!a)return;let b=JSON.stringify(l);v.current!==b&&(t(l),v.current=b)},[a,l]),(0,d.useEffect)(()=>{a?(r(""),w("")):(n([]),r(""),p(!1),t([]),v.current="",u.current&&u.current.abort())},[a,w]),(0,d.useEffect)(()=>{if(!a)return;let b=setTimeout(()=>{w(q)},300);return()=>{clearTimeout(b)}},[q,a,w]),(0,d.useEffect)(()=>()=>{u.current&&u.current.abort()},[]),a)?(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,c.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold",children:k?"Select Images":"Select Image"}),(0,c.jsx)("button",{onClick:b,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,c.jsx)(e.X,{size:20})})]}),(0,c.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(h.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,c.jsx)("input",{type:"text",placeholder:"Search images...",value:q,onChange:a=>r(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]})}),(0,c.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:o?(0,c.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto"}),(0,c.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading media..."})]})}):0===m.length?(0,c.jsxs)("div",{className:"text-center py-12",children:[(0,c.jsx)(f.Image,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),(0,c.jsx)("p",{className:"text-gray-500",children:q?"No images found":"No images uploaded yet"})]}):(0,c.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:m.map(a=>{let d=s.includes(a.id);return(0,c.jsxs)("div",{onClick:()=>{k?t(s.includes(a.id)?s.filter(b=>b!==a.id):[...s,a.id]):(j(a.id,a.urls.optimized),b())},className:`relative group cursor-pointer rounded-lg border-2 overflow-hidden transition-all ${d?"border-teal-500 ring-2 ring-teal-200":"border-gray-200 hover:border-teal-300"}`,children:[(0,c.jsxs)("div",{className:"aspect-square relative bg-gray-100",children:[(0,c.jsx)("img",{src:(0,i.getUploadUrl)(a.urls.thumbnail),alt:a.original_filename,className:"w-full h-full object-cover"}),d&&(0,c.jsx)("div",{className:"absolute inset-0 bg-teal-500 bg-opacity-20 flex items-center justify-center",children:(0,c.jsx)("div",{className:"bg-teal-500 text-white rounded-full p-2",children:(0,c.jsx)(g.Check,{size:20})})})]}),(0,c.jsx)("div",{className:"p-2 bg-white",children:(0,c.jsx)("p",{className:"text-xs text-gray-600 truncate",title:a.original_filename,children:a.original_filename})})]},a.id)})})}),(0,c.jsxs)("div",{className:"p-4 border-t border-gray-200 flex justify-between items-center",children:[k&&(0,c.jsxs)("p",{className:"text-sm text-gray-600",children:[s.length," image",1!==s.length?"s":""," selected"]}),(0,c.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,c.jsx)("button",{onClick:b,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),k&&(0,c.jsxs)("button",{onClick:()=>{k&&s.length>0&&(s.forEach(a=>{let b=m.find(b=>b.id===a);b&&j(b.id,b.urls.optimized)}),b())},disabled:0===s.length,className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:["Select ",s.length>0&&`(${s.length})`]})]})]})]})}):null}a.s(["default",()=>j],66842)},26427,a=>{"use strict";var b=a.i(33422),c=a.i(1635),d=a.i(12961),e=a.i(7755),f=a.i(20421),g=a.i(21512),h=a.i(80162),i=a.i(98859),j=a.i(55835),k=a.i(66842);function l(){let a=(0,d.useRouter)(),l=(0,d.useParams)(),m=l?.id,[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)({title:"",short_description:"",long_description:"",category:"",status:"draft",priority:0,is_featured:!1,meta_title:"",meta_description:"",tags:"",featured_image:"",featured_image_id:null}),[v,w]=(0,c.useState)(!1);(0,c.useEffect)(()=>{m&&x()},[m]);let x=async()=>{try{let a=await fetch(j.API_ENDPOINTS.PRODUCT(m),{credentials:"include"});if(a.ok){let b=await a.json(),c=b.data||b;u({title:c.title||"",short_description:c.short_description||"",long_description:c.long_description||"",category:c.category||"",status:c.status||"draft",priority:c.priority||0,is_featured:c.is_featured||!1,meta_title:c.meta_title||"",meta_description:c.meta_description||"",tags:c.tags?.join(", ")||"",featured_image:c.featured_image||"",featured_image_id:null})}else s("Failed to load product")}catch(a){s("Connection error. Please try again.")}finally{q(!1)}},y=async b=>{b.preventDefault(),o(!0),s("");try{let b={title:t.title,short_description:t.short_description||null,long_description:t.long_description||null,category:t.category||null,featured_image:t.featured_image||null,status:t.status,priority:parseInt(String(t.priority))||0,is_featured:t.is_featured,meta_title:t.meta_title||null,meta_description:t.meta_description||null,tags:t.tags?t.tags.split(",").map(a=>a.trim()).filter(a=>a):[]},c=await fetch(j.API_ENDPOINTS.PRODUCT(m),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json();c.ok?a.push("/admin/products"):s(d.error?.message||"Failed to update product")}catch(a){s("Connection error. Please try again.")}finally{o(!1)}},z=a=>{let{name:b,value:c,type:d}=a.target;u(e=>({...e,[b]:"checkbox"===d?a.target.checked:c}))};return p?(0,b.jsx)("div",{className:"max-w-4xl",children:(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-600",children:"Loading product..."})})}):(0,b.jsxs)("div",{className:"max-w-4xl",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)(i.default,{href:"/admin/products",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[(0,b.jsx)(e.ArrowLeft,{size:20}),"Back to Products"]}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Product"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Update product information"})]}),r&&(0,b.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:r}),(0,b.jsxs)("form",{onSubmit:y,className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Title *"}),(0,b.jsx)("input",{type:"text",name:"title",value:t.title,onChange:z,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none",placeholder:"Enter product title",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Short Description"}),(0,b.jsx)("input",{type:"text",name:"short_description",value:t.short_description,onChange:z,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none",placeholder:"Brief description"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Long Description"}),(0,b.jsx)("textarea",{name:"long_description",value:t.long_description,onChange:z,rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none",placeholder:"Detailed description"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Featured Image"}),t.featured_image?(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:(0,j.getUploadUrl)(t.featured_image),alt:"Featured",className:"w-full h-48 object-contain rounded-lg border border-gray-300 bg-gray-50",loading:"lazy",decoding:"async",onError:a=>{let b=a.target;if(console.error("Image failed to load:",(0,j.getUploadUrl)(t.featured_image)),b.src.includes("placeholder"))b.src="/placeholder-image.png";else{let a=j.API_ENDPOINTS.MEDIA.split("/api")[0],c=`${a}${t.featured_image}`;console.log("Trying fallback URL:",c),b.src=c}}}),(0,b.jsx)("button",{type:"button",onClick:()=>{u(a=>({...a,featured_image:"",featured_image_id:null}))},className:"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 shadow-lg",children:(0,b.jsx)(h.X,{size:16})}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Selected: ",t.featured_image]})]}):(0,b.jsxs)("button",{type:"button",onClick:()=>w(!0),className:"w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center hover:border-teal-500 hover:bg-teal-50 transition-colors",children:[(0,b.jsx)(g.Image,{className:"w-12 h-12 text-gray-400 mb-2"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Click to select image from gallery"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,b.jsx)("input",{type:"text",name:"category",value:t.category,onChange:z,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none",placeholder:"e.g., Engine Parts"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,b.jsx)("input",{type:"number",name:"priority",value:t.priority,onChange:z,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none",placeholder:"0"})]})]})]})]}),(0,b.jsxs)("div",{className:"border-t pt-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"SEO Settings"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title"}),(0,b.jsx)("input",{type:"text",name:"meta_title",value:t.meta_title,onChange:z,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none",placeholder:"SEO title (auto-generated if empty)"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),(0,b.jsx)("textarea",{name:"meta_description",value:t.meta_description,onChange:z,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none",placeholder:"SEO description (auto-generated if empty)"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma-separated)"}),(0,b.jsx)("input",{type:"text",name:"tags",value:t.tags,onChange:z,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none",placeholder:"marine, engine, parts"})]})]})]}),(0,b.jsxs)("div",{className:"border-t pt-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Publishing Options"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,b.jsxs)("select",{name:"status",value:t.status,onChange:z,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none",children:[(0,b.jsx)("option",{value:"draft",children:"Draft"}),(0,b.jsx)("option",{value:"published",children:"Published"}),(0,b.jsx)("option",{value:"disabled",children:"Disabled"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"is_featured",name:"is_featured",checked:t.is_featured,onChange:z,className:"w-4 h-4 text-teal-600 border-gray-300 rounded focus:ring-teal-500"}),(0,b.jsx)("label",{htmlFor:"is_featured",className:"text-sm font-medium text-gray-700",children:"Featured Product"})]})]})]})]}),(0,b.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl flex justify-end gap-3",children:[(0,b.jsx)(i.default,{href:"/admin/products",className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",disabled:n,className:"flex items-center gap-2 px-6 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg transition-colors disabled:bg-gray-400",children:[(0,b.jsx)(f.Save,{size:20}),n?"Updating...":"Update Product"]})]})]}),(0,b.jsx)(k.default,{isOpen:v,onClose:()=>w(!1),onSelect:(a,b)=>{u(c=>({...c,featured_image:b,featured_image_id:a})),w(!1)},multiple:!1})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=marinellpnew_45905c1b._.js.map