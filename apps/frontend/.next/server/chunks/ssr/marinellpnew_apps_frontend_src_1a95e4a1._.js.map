{"version":3,"sources":["../../../../../../../marinellpnew/apps/frontend/src/config/api.ts","../../../../../../../marinellpnew/apps/frontend/src/components/shared/ScrollReveal.tsx","../../../../../../../marinellpnew/apps/frontend/src/components/shared/ProductCard.tsx"],"sourcesContent":["/**\n * API Configuration\n * Uses environment variables with fallback to defaults\n */\n\nconst getBackendUrl = (): string => {\n  // In Next.js, environment variables prefixed with NEXT_PUBLIC_ are available on the client\n  if (typeof window !== 'undefined') {\n    // Client-side: use environment variable or default\n    return process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5001';\n  }\n  // Server-side: use environment variable or default\n  return process.env.API_URL || process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5001';\n};\n\nexport const API_BASE_URL = getBackendUrl();\n\nexport const API_ENDPOINTS = {\n  // Auth\n  LOGIN: `${API_BASE_URL}/api/auth/login`,\n  LOGOUT: `${API_BASE_URL}/api/auth/logout`,\n  FORGOT_PASSWORD: `${API_BASE_URL}/api/auth/forgot-password`,\n  RESET_PASSWORD: `${API_BASE_URL}/api/auth/reset-password`,\n  CHANGE_PASSWORD: `${API_BASE_URL}/api/auth/change-password`,\n  CHANGE_EMAIL: `${API_BASE_URL}/api/auth/change-email`,\n  GET_CURRENT_USER: `${API_BASE_URL}/api/auth/me`,\n  ENABLE_2FA: `${API_BASE_URL}/api/auth/2fa/enable`,\n  VERIFY_2FA_SETUP: `${API_BASE_URL}/api/auth/2fa/verify-setup`,\n  DISABLE_2FA: `${API_BASE_URL}/api/auth/2fa/disable`,\n  GET_2FA_STATUS: `${API_BASE_URL}/api/auth/2fa/status`,\n\n  // Admin Dashboard\n  DASHBOARD_STATS: `${API_BASE_URL}/api/admin/dashboard/stats`,\n\n  // Products (New Arrivals)\n  PRODUCTS: `${API_BASE_URL}/api/admin/new-arrivals`,\n  PRODUCT: (id: number | string) => `${API_BASE_URL}/api/admin/new-arrivals/${id}`,\n\n  // Blogs\n  BLOGS: `${API_BASE_URL}/api/admin/blogs`,\n  BLOG: (id: number | string) => `${API_BASE_URL}/api/admin/blogs/${id}`,\n\n  // Media\n  MEDIA: `${API_BASE_URL}/api/admin/media`,\n  MEDIA_UPLOAD: `${API_BASE_URL}/api/admin/media/upload`,\n  MEDIA_ITEM: (id: number | string) => `${API_BASE_URL}/api/admin/media/${id}`,\n\n  // Public\n  PUBLIC_PRODUCTS: `${API_BASE_URL}/api/new-arrivals`,\n  PUBLIC_PRODUCT_BY_SLUG: (slug: string) => `${API_BASE_URL}/api/new-arrivals/${slug}`,\n  PUBLIC_BLOGS: `${API_BASE_URL}/api/blogs`,\n  PUBLIC_BLOG_BY_SLUG: (slug: string) => `${API_BASE_URL}/api/blogs/${slug}`,\n\n  // Contact\n  CONTACT: `${API_BASE_URL}/api/contact`,\n};\n\n// Helper function to get upload URLs\nexport const getUploadUrl = (path: string): string => {\n  if (!path) return '';\n  // If path already starts with http, return as is (decode first to avoid double encoding)\n  if (path.startsWith('http://') || path.startsWith('https://')) {\n    try {\n      const url = new URL(path);\n      // Decode and re-encode to normalize, but don't double encode\n      const decodedPath = decodeURIComponent(url.pathname);\n      url.pathname = decodedPath.split('/').map(segment => encodeURIComponent(segment)).join('/');\n      return url.toString();\n    } catch {\n      return path;\n    }\n  }\n  // Otherwise, prepend backend URL and encode the path segments\n  const cleanPath = path.startsWith('/') ? path : `/${path}`;\n  // Decode first to avoid double encoding, then encode each segment\n  const decodedPath = decodeURIComponent(cleanPath);\n  const encodedPath = decodedPath.split('/').map(segment => {\n    // Don't encode empty segments (double slashes)\n    if (!segment) return '';\n    return encodeURIComponent(segment);\n  }).join('/');\n  return `${API_BASE_URL}${encodedPath}`;\n};\n","\"use client\";\n\nimport { useEffect, useRef, ReactNode } from 'react';\n\ninterface ScrollRevealProps {\n  children: ReactNode;\n  delay?: number;\n  className?: string;\n}\n\nexport default function ScrollReveal({ children, delay = 0, className = '' }: ScrollRevealProps) {\n  const ref = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            setTimeout(() => {\n              entry.target.classList.add('revealed');\n            }, delay);\n            observer.unobserve(entry.target);\n          }\n        });\n      },\n      {\n        threshold: 0.1,\n        rootMargin: '0px 0px -50px 0px',\n      }\n    );\n\n    if (ref.current) {\n      observer.observe(ref.current);\n    }\n\n    return () => {\n      if (ref.current) {\n        observer.unobserve(ref.current);\n      }\n    };\n  }, [delay]);\n\n  return (\n    <div ref={ref} className={`scroll-reveal ${className}`}>\n      {children}\n    </div>\n  );\n}\n","'use client';\n\nimport Link from 'next/link';\nimport { useEffect, useRef, useState } from 'react';\nimport { getUploadUrl } from '@/config/api';\n\ninterface ProductCardProps {\n    title: string;\n    image: string;\n    category: string;\n    slug: string;\n}\n\nexport default function ProductCard({ title, image, category, slug }: ProductCardProps) {\n    // Check if image exists and is not empty\n    const hasImage = image && image.trim() !== '' && !image.includes('placehold.co');\n    \n    // Determine image URL: if it's a public folder path (starts with / and not /uploads), use it directly\n    // Otherwise, use getUploadUrl for backend-uploaded images\n    let imageUrl: string | null = null;\n    if (hasImage) {\n        if (image.startsWith('/') && !image.startsWith('/uploads')) {\n            // Public folder image - use directly\n            imageUrl = image;\n        } else {\n            // Backend-uploaded image - use getUploadUrl\n            imageUrl = getUploadUrl(image);\n        }\n    }\n    const imgRef = useRef<HTMLImageElement>(null);\n    const [imageError, setImageError] = useState(false);\n    \n    useEffect(() => {\n        if (imgRef.current) {\n            const img = imgRef.current;\n            const handleError = () => {\n                setImageError(true);\n                img.style.display = 'none';\n            };\n            img.addEventListener('error', handleError);\n            return () => img.removeEventListener('error', handleError);\n        }\n    }, [imageUrl]);\n    \n    return (\n        <div className=\"bg-white border rounded-lg overflow-hidden hover:shadow-lg transition-shadow group\">\n            <div className=\"relative h-64 bg-white overflow-hidden flex items-center justify-center p-4\">\n                {hasImage && imageUrl && !imageError ? (\n                    <img\n                        ref={imgRef}\n                        src={imageUrl}\n                        alt={`${title} - ${category} - UTS Marine LLP`}\n                        className=\"max-w-full max-h-full w-auto h-auto object-contain transition-transform duration-500 group-hover:scale-105\"\n                        loading=\"lazy\"\n                        decoding=\"async\"\n                    />\n                ) : null}\n                {/* No Image Placeholder */}\n                <div className={`no-image-placeholder absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 ${hasImage && imageUrl && !imageError ? 'hidden' : ''}`}>\n                    <svg className=\"w-16 h-16 text-gray-400 mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                    </svg>\n                    <p className=\"text-sm font-medium text-gray-500\">No Image</p>\n                    <p className=\"text-xs text-gray-400 mt-1\">Available</p>\n                </div>\n                <span className=\"absolute top-4 left-4 bg-teal-600 text-white text-xs font-bold px-3 py-1 rounded z-10\">\n                    {category}\n                </span>\n            </div>\n            <div className=\"p-6\">\n                <h3 className=\"text-lg font-bold text-gray-900 mb-2 truncate\">{title}</h3>\n                <Link\n                    href={`/products/${slug}`}\n                    className=\"inline-block text-sm font-semibold text-teal-600 hover:text-teal-800\"\n                >\n                    View Details â†’\n                </Link>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}